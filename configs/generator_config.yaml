# Настройки генерации
generation:
  num_samples: 50  # Используется только для офлайн генерации
  forgeries_per_source: 10  # Количество подделок на один оригинал
  resources_dir: "./resources/"
  output_dir: "./outputs"
  save_masks: true
  image_format: "png"
  operations_per_image: [1, 1]

# Пути к данным
paths:
  source_images: "./sources/images"
  source_markup: "./sources/markup"
  output_images: "./outputs/images"
  output_masks: "./outputs/masks"

# Splicing манипуляции
splicing:
  enabled: true
  operations:
    bbox_swap:
      enabled: false
      probability: 0.4
      #allowed_categories: ["text", "date", "number", "name"]
    
    external_patch:
      enabled: false
      probability: 0.6
      max_patches: 3
      patch_size_range: [50, 300]  # min, max размер вставки
      source_diversity: 0.7        # вероятность использовать внешний документ

    internal_swap:
      enabled: false
      probability: 0.5
    
    inpaint_borders:
      enabled: true
      probability: 0.4
      num_bboxes: [1, 2]         # выбрать N случайных bbox из разметки
      allowed_categories: []     # пустой список = любые категории
      radius: 5                  # радиус inpaint
      method: "telea"            # telea | ns
      print_text_prob: 1.0
      text_len: [1, 10]
      text_style:
        font_size_range: [35, 100]
        font_color: "random"
        opacity: [0.5, 1.0] 
        angle: 0 # угол поворота текста в градусах (фикс или [min,max])
        align: "center"  #"left"/"right" (по горизонтали)
        valign: "middle" #"top"/"bottom" (по вертикали)
        # stroke_width: # int 
        # stroke_fill: # color spec 
    
    inpaint_random:
      enabled: false
      probability: 0.5
      num_spots: [1, 6]          # количество пятен для инпейнта
      spot_size: [64, 128]         # размер пятен (диаметр/сторона)
      shapes: ["circle", "rect"] # формы пятен
      radius: 3
      method: "telea"

    random_patch_paste:
      enabled: false
      probability: 0.6
      same_image_prob: 0.5        # вероятность взять патч из той же картинки
      insert_into_bbox_prob: 0.6  # вероятность вставить патч в существующий bbox
      patch_size_range: [32, 256] # сторона/ширина патча источника (px)

    digital_signature:
      enabled: false
      probability: 0.3
      random_position_prob: 1.0         # Вер-ть генерировать не в боксе разметки
      signature_width: [200, 450]       # Ширина генерируемых подписей
      signature_height: [80, 220]      # Высота генерируемых подписей
      scale_range: [0.7, 1.3]           # Диапазон масштабирования при вставке
      
      style_ranges:
        num_strokes_range: [3, 15]      # Количество штрихов в подписи (минимум–максимум)
        stroke_thickness_range: [1, 3]  # Толщина линии (фиксированная, без вариации)
        pressure_variation: False       # Имитация изменения толщины от давления пера
        antialias_scale: [1, 3]         # Масштаб для сглаживания (1 = без антиалиасинга)
        smoothing: [0.0, 1.0]           # Уровень сглаживания кривых (0 = без сглаживания)
        jitter_intensity: [0.2, 0.6]    # Насколько сильно штрихи колеблются (дрожание)
        jitter_frequency: [0.45, 0.45]  # Частота колебаний штрихов
        steps_per_stroke: [400, 600]    # Количество шагов/точек при рисовании каждого штриха
        hand_lift_prob: 0.1             # Вероятность, что "рука" поднимется между сегментами
        hand_lift_max_segments: [1, 3]  # Макс. число сегментов при подъёме руки
        ink_color: "random"             # Цвет чернил — random = случайный RGB
        opacity: [0.2, 1.0]             # Прозрачность штриха (диапазон)
        splat_prob: 0.0                 # Вероятность появление "клякс" / брызг
        extra_small_strokes_prob: 0.0   # Вероятность добавления маленьких дополнительных штрихов
        variable_sampling: True         # Переменная дискретизация: делает подпись менее ровной


# Настройки качества
quality:
  jpeg_compression:
    enabled: false
    prob: 0.7
    quality: [80, 95]
